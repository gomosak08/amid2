<%= form_with url: available_fields_admin_appointments_path(format: :turbo_stream),
              method: :get,
              class: "space-y-6",
              data: { turbo_stream: true } do |f| %>

  <%= f.hidden_field :package_id,       value: package.id %>
  <%= f.hidden_field :doctor_id,        value: doctor_id %>
  <%= f.hidden_field :appointment_date, value: appointment_date %>



  <% if available_times.any? %>
    <div class="field">
      <%= f.label :time_slot, "Selecciona una Hora", class: "block text-lg font-medium text-gray-700 mb-2" %>
      <%= f.select :time_slot,
            available_times.map { |t| [t.strftime("%I:%M %p"), t.iso8601] },
            { prompt: "Selecciona una Hora", selected: time_slot },
            class: "block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",
            onchange: "this.form.requestSubmit()" %>
    </div>
  <% else %>
    <div class="mt-4 p-4 bg-yellow-100 border border-yellow-300 text-yellow-800 rounded">
      Doctor no disponible para la fecha seleccionada.
    </div>
  <% end %>
<% end %>
